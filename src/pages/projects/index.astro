---
import CollectionPageStructuredData from '@/components/meta/CollectionPageStructuredData.astro'
import ArrowCard from '@components/ArrowCard.astro'
import Container from '@components/Container.astro'
import { PROJECTS } from '@consts'
import PageLayout from '@layouts/PageLayout.astro'
import { getCollection } from 'astro:content'

const projects = (await getCollection('projects'))
  .filter(project => !project.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<PageLayout title={PROJECTS.TITLE} description={PROJECTS.DESCRIPTION}>
  <CollectionPageStructuredData
    slot="structured-data"
    type="Article"
    name={PROJECTS.TITLE}
    description={PROJECTS.DESCRIPTION}
  />
  <Container>
    <div class="space-y-10">
      <div class="animate">
        <h1 class="font-semibold uppercase text-base-content">Projects</h1>
        <p class="text-sm text-base-content/70 mt-1">Projects and experiments</p>
      </div>
      <ul class="animate flex flex-col gap-4">
        {
          projects.map(project => (
            <li>
              <ArrowCard entry={project} context="projects" />
            </li>
          ))
        }
      </ul>
    </div>
  </Container>
</PageLayout>
